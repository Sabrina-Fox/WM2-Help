# GPD Win Max 2 Wiki/Guide
A list of things useful to owners of the GPD Win Max 2</br>
Read [this](https://github.com/SabrinaRDC/GPD-before-buying) if you are purchasing a GPD product for the first time.
# A check list of things to check on a new device
###### Credits to SuperSexySoapTurtle#6606 on discord.
1. Test gpu under load for black screen. (Use graphically heavy games, 3dmark, photoshop, etc.)
2. Check bios version to make sure its up to date (Only update if necessary, see #1)
3. Test all keyboard keys (A lot of people are having issues with missed inputs) If you're having issues, try putting tape under the keycap
4. Test analog deadzones and update firmware if needed
5. Test for static shock (Some dude was getting shocked by his unit occasionally lmao)
6. Look for dead pixels
7. Test if micro sd & sd card can be read. A lot of users were having issues with it disconnecting and reconnecting. This problem doesn't immediately show up, so if you use  SD and Micro SD a lot, I would monitor this.
8. Touch screen deadzones. Make sure all corners of the screen can be touched correctly. (I'd recommend touching and dragging each corner on the desktop to test this)
9. Make sure touch pad isn't going insane. (If it is, install firmware update from gpd)
10. Make sure screen is glued correctly (Some dude could see into his unit through a gap in the upper half of the screen lmao)
11. Do a full scan for malware with Microsoft defender. It should catch whatever worm or virus if any. Or just reinstall OS if you aren't lazy like me.
12. Physical appereance of the paint on the metalic parts.
13. Make sure keycaps don't have cracks in them.
14. Make sure Dpad is working correctly.
15. Make sure remote play is working correctly. (A user was having issues with the screen randomly going black and having to force the machine to shut down.)

###### Extra things to check for the Win Max 2 2023 refresh.
1. Functionality of the onboard HDMI port.
2. If the device is able to run stably with the RAM speed at 7500MT/s.
3. If both of the SD card reader slots are working individually.
4. The performance of stock SSD(eg. read/write speed).
5. Any display retention or dead/stuck pixels.
6. If the built-in keyboard works without any problems or not.
7. If the device thermal throttles even with a good airflow at stock TDP.
8. If the shoulder buttons and/or the triggers are seated properly.

# Options for adjusting TDP in windows ([Download links](https://github.com/SabrinaRDC/WM2-Help#toolsfor-all-models))
1. MotionAssistant
![MotionAssistant](https://user-images.githubusercontent.com/74781086/206900788-e8e89c61-833b-4507-871c-33496eb228d1.gif)
2. Ciphray's TDP bat menu
![TDP Bat](https://user-images.githubusercontent.com/74781086/206900455-b058a29e-f4ae-438d-b444-5b2dcbcfa981.png)
3. Power Control Panel
![PCP](https://user-images.githubusercontent.com/74781086/206900406-57df3589-3ee1-47e6-a303-9cdc6c9552c1.png)
4. Handheld Companion
![HC](https://user-images.githubusercontent.com/14330834/184693435-7df5ad40-ddb1-4359-9335-1a5804441dc3.png)
5. Handheld Control Panel
![HCP](https://github.com/SabrinaRDC/WM2-Help/assets/74781086/e0123c3d-29b0-42bf-ba0d-280909f005ea)
6. RyzenAdj
# Options for adjusting TDP in Linux
1. [RyzenAdj](https://github.com/FlyGoat/RyzenAdj)



# Tools(FOR ALL MODELS):
1. [AMD Software: Adrenalin Edition](https://www.amd.com/en/support)
2. [Camera firmware from GPD](https://drive.google.com/file/d/1yjkOMQfk6b8E3DwNiwuMqxPgFg2GYQa5/view)
3. [MotionAssistant V1.1.7.3](https://drive.google.com/file/d/1yMVdNB3ppVvnGrzuOSTbIqfsGm1F7_tE/view)
4. [WinControls v1.06](https://www.gpd.hk/filedownload/88995)
5. [GamePad Test Calibration Tool V1.02](https://www.gpd.hk/filedownload/89292)
6. [GPD Gamepad Firmware Tool V3.09/V1.21](https://www.mediafire.com/file/2lqucxtobzk0wfc/GPD_Gamepad_Firmware_Tool%25288%2529.exe/file)
7. [Performance overlay for WM2](https://discord.com/channels/243411108940087297/826965330965430272/1045420389368594472)
8. [Ciphray's TDP bat menu(Latest in pinned messages)](https://discord.com/channels/243411108940087297/1065818597844340777)
9. [Script for adding extra resolutions and refresh rates](https://discord.com/channels/243411108940087297/802730777443958824/1040061390158827650)
10. [Calibration file for the WM2 screen courtesy of Cwiiis#7703 on discord.](https://discord.com/channels/243411108940087297/802730777443958824/1057673626435989544)
11. [Power Control Panel](https://github.com/project-sbc/Power-Control-Panel-v2)
12. [Handheld Companion](https://github.com/Valkirie/HandheldCompanion)
13. [Handheld Control Panel](https://github.com/project-sbc/Handheld-Control-Panel)
14. [WIN Max 2 grip customization tool](https://www.gpd.hk/filedownload/88995)
15. [A tool for automatically managing game settings based on eGPU status and hotplugging oculink/PCIe eGPUs(EARLY DEVELOPMENT)](https://github.com/diego351/handheld-config)

# Downloads(FOR WM2 2022)
1. [Driver pack from GPD(V5)(FOR WM2 2022 ONLY)](https://drive.google.com/file/d/1oKFFadZp4it-044eSPSE_tzKfynbiyYW/view)
2. [WM2 BIOS V1.05 files(FOR WM2 2022 ONLY)](https://drive.google.com/file/d/1QDxop-R8PEQ6uLCJDsu4gTd4ULfbFTVV/view)<br/>
3. [Windows 11 Home 22H2 with inclued drivers from GPD(FOR WM2 2022 ONLY)](https://drive.google.com/file/d/1avKSQQxHK625s0sXWBignfJ0p7I081jE/view)<br/>
###### To use this image you will need to format a USB drive to NTFS and rename it to "WINPE" and copy everything in the zip file onto it, no need for flashing software.

# Downloads(FOR WM2 2023)
1. [Driver pack from GPD(V2.1)(FOR WM2 2023 ONLY)](https://drive.google.com/file/d/15qrObeudSKq53LZENx3afs_FqZNhFXEi/view)
2. [WM2 BIOS V0.35 files(FOR WM2 2023 ONLY)](https://drive.google.com/file/d/1Y6HbztcFw7XQaJuUUzme4K_Uy_QXxN9V/view?usp=sharing)
3. [Windows 11 Home 22H2 with inclued drivers from GPD(FOR WM2 2023 ONLY)](https://drive.google.com/file/d/1o-jxBR0aCvIJrOcTarW-Y-2Ezjt7Xps3/view)<br/>
###### To use this image you will need to format a USB drive to NTFS and rename it to "WINPE" and copy everything in the zip file onto it, no need for flashing software.

###### BIOS files usage instructions.(Credits to miracy#7746 on Discord for the instructions.)
###### 1. Download the file above and put the contents of the ZIP file in the root directory of a FAT32 USB (so that the startup.nsh file is in the root of the USB). You can leave this plugged in.
###### 2. In Windows, if you are using Bitlocker, open the start menu, type in bitlocker, open that control panel, and select the option to suspend Bitlocker. IF YOU USE BITLOCKER MAKE SURE YOU HAVE THE RECOVERY KEY AVAILABLE SOMEWHERE.
###### 3. Shut the computer down. Turn it back on and press delete at the beginning of the boot sequence to open the UEFI (you can spam it).
###### 4. In UEFI, you need to disable Secure Boot. If advanced is turned on, this is several tabs over, I think under Advanced, and you'll see Secure Boot as an option in one of the tabs - hit that and then choose disable.
###### 5. Then go to the boot tab and make sure that the first device in the boot order is the USB (or however you want to boot from the USB, boot from the USB now)
###### 6. You'll get text on the screen (if you did not do 4, you will get a red window saying that the signature was invalid). and then you press any key to continue. It will take several minutes to install the UEFI. This installer just suddenly makes the computer turn off without warning, after all the steps are done (the last screen has several bar meters that fill up).
###### 7. At this point, unplug the USB drive. I had to turn the computer on manually again. It takes some extra time for the boot logo to come up - just be patient. Use delete to enter UEFI again and undo steps 4-5 as needed (turn secure boot back on and change the primary boot drive back to the NVME).
###### 8. When you get back to Windows, you should not need to undo 2. Or at least Bitlocker had turned itself back on by this time.

# Full BIOS menu tree of the 2023 WM2
The BIOS [Menu Tree](https://cryptpad.fr/code/#/2/code/view/eYbhlShJI4118DQ0Qm-d9S+j1OUd8PFpcoM2yrvzQuU/embed/present/) on the 2023 WM2 with full credit going to [u/dreieckli](https://www.reddit.com/user/dreieckli) for mapping out the entire BIOS!

# Useful information
1. For chargers, it MUST support AT LEAST PD3.0 15v 3A to trickle charge, but the OS might force your TDP down when plugged in to a charger like that to try to ensure the battery gets charged, a charger that support 20v is heavily recommanded for use while the device is under load(eg. gaming while plugged in), 20v 3A is good enough to play games and charge at the same time, but with a 20v 5A charger and e-marked cable it will be faster if the TDP is high and you are loading the device heavily.
2. All WM2 comes with the same PD 20v 5A charger with a 1 meter cable in box, the charger uses the Chinese/US two prong plug and comes with an adapter for your region if your plug is different.<br/>
3. The included charger have been tested to be safe for both you and the device, the switching frequency is around 100kHz and a quick power analysis have been done to test the voltage ripple under full 20v 5A load with the results coming out at around 110mVp-p(0.55% of output) at 20MHz BW limit(This results only applies to the stock charger that came with the original Win Max 2 2022, although the one that comes with the 2023 model might be very similar or the same electrically).<br/>
![image](https://user-images.githubusercontent.com/74781086/205165719-66f6aeb6-fe70-4712-878d-a348c3253339.png)
4. Secondary voltage referenced to mains earth(This results only applies to the stock charger that came with the original Win Max 2 2022, although the one that comes with the 2023 model might be very similar or the same electrically).<br/>
![image](https://user-images.githubusercontent.com/74781086/206535040-3858f99c-4b7b-4357-b6d0-5439fddd06ae.png)
5. Included charger under full 100w load, note the voltage drop is due to the cable used in the test and due to using a two point measurement instead of a four point measurement, the voltage drop is the same for other power supplies when running the same two point measurement(This results only applies to the stock charger that came with the original Win Max 2 2022, although the one that comes with the 2023 model might be very similar or the same electrically).<br/>
![image](https://user-images.githubusercontent.com/74781086/206535289-74cc88b5-613e-4ca1-88af-ea797e4f6e00.png)<br/>
6. [3D file of the bottom panel](https://github.com/SabrinaRDC/WM2-Help/blob/main/00_rear_top.stp) courtesy of @tostarrito on Discord<br/>
![image](https://github.com/SabrinaRDC/WM2-Help/assets/74781086/0953412e-fa70-47d0-a4f9-61665272bbe3)
7. [3D printable grips and stand](https://www.printables.com/model/327602-grips-for-gpd-win-max-2) by Qaz#5952 on Discord<br/>
![image](https://user-images.githubusercontent.com/74781086/206533235-70f88091-1914-4457-b98d-6c5a277de22a.png)
8. [3D printable grips](https://www.printables.com/model/326903-gpd-win-max-2-grips) by Tåkefyrsten#5455 on Discord<br/>
![image](https://user-images.githubusercontent.com/74781086/206533789-085c0d6e-0363-49ab-9504-b6147b6d403b.png)
9. [Video](https://www.youtube.com/watch?v=mC0WuAD7fIo) instructions on how to install the LTE module<br/>
10. Oculink Performance requirements for cables and connectors
![image](https://cdn.discordapp.com/attachments/802730777443958824/1107871527707344977/image.png)
11. Links to various accessories for the WM2 on Aliexpress and Taobao.
###### Aliexpress links for overseas buyers.
###### 1. [Carrying case](https://www.aliexpress.com/item/1005004981462180.html?spm=a2g0o.productlist.0.0.1eb01ffcAcvSBg&algo_pvid=9ddfd655-645c-4b1a-8e83-c76be23516ce&algo_exp_id=9ddfd655-645c-4b1a-8e83-c76be23516ce-17&pdp_ext_f=%7B%22sku_id%22%3A%2212000031229958523%22%7D&pdp_npi=2%40dis%21HKD%21180.44%21119.08%21%21%21%21%21%402101e9d216705247710423384e86be%2112000031229958523%21sea&curPageLogUid=mVdTrTNmzWS6)
###### 2. [Keyboard cover](https://www.aliexpress.com/item/1005004825576824.html?spm=a2g0o.productlist.0.0.1eb01ffcAcvSBg&algo_pvid=9ddfd655-645c-4b1a-8e83-c76be23516ce&algo_exp_id=9ddfd655-645c-4b1a-8e83-c76be23516ce-21&pdp_ext_f=%7B%22sku_id%22%3A%2212000030631672795%22%7D&pdp_npi=2%40dis%21HKD%2173.0%2173.0%21%21%21%21%21%402101e9d216705247710423384e86be%2112000030631672795%21sea&curPageLogUid=g42LBIfJ7Ywm)
###### 3. [Custom skins](https://www.aliexpress.com/item/1005004820866661.html?spm=a2g0o.productlist.0.0.1eb01ffcAcvSBg&algo_pvid=9ddfd655-645c-4b1a-8e83-c76be23516ce&algo_exp_id=9ddfd655-645c-4b1a-8e83-c76be23516ce-24&pdp_ext_f=%7B%22sku_id%22%3A%2212000030618504326%22%7D&pdp_npi=2%40dis%21HKD%21112.3%21112.3%21%21%21%21%21%402101e9d216705247710423384e86be%2112000030618504326%21sea&curPageLogUid=6SX2xv0fEsxV)
###### 4. [ADT-LINK R43SG for e-GPU via the 2230 slot](https://www.aliexpress.com/item/1005003279448856.html?spm=a2g0o.productlist.0.0.1f04b294RXCUKx&algo_pvid=ff3ac57c-a39f-42ef-a956-1a4052830f26&algo_exp_id=ff3ac57c-a39f-42ef-a956-1a4052830f26-0&pdp_ext_f=%7B%22sku_id%22%3A%2212000024996792413%22%7D&pdp_npi=2%40dis%21HKD%21521.0%21468.9%21%21%21%21%21%40210318b916705251782173623eb6e2%2112000024996792413%21sea&curPageLogUid=PbOK0xeskX9F)
###### Taobao links for SEA buyers.
###### 1. [Carrying case](https://item.taobao.com/item.htm?spm=a230r.1.14.193.1b493697cjwEAJ&id=684559610884&ns=1&abbucket=9#detail)
###### 2. [Keyboard cover](https://detail.tmall.com/item_o.htm?abbucket=9&id=684106878261&ns=1&spm=a230r.1.14.198.1b493697cjwEAJ&sku_properties=262824012:19662740260)
###### 3. [Custom skins](https://detail.tmall.com/item_o.htm?abbucket=9&id=679824694175&ns=1&spm=a230r.1.14.205.1b493697cjwEAJ&sku_properties=262824012:21785720845)
###### 4. [ADT-LINK R43SG for e-GPU via the 2230 slot](https://item.taobao.com/item.htm?spm=a230r.1.14.16.632023e2vv1Yuy&id=679927454632&ns=1&abbucket=9#detail)

# Known issues
1. Some specific charger would cause the WM2 to lower its TDP when plugged in.
2. On some units the SD card slots will constantly disconnet and reconnect rendering it unuseable.(This only happens to WM2 2022)(See below for workaround)
3. Display out on hubs plugged into the USB 3.2 slot doesn't work and lock the resolution to 800x600
4. Some spacebars doesn't trigger consistently. (See below for fix)
5. Some units have erratic touchpads and registers random touches.(See below for potential fix)
6. Some Bitrates and Sample Rates for the built-in DAC are sometimes missing on windows.(See below for fix)
7. Sometimes the trackpad might stop working and the firmware update tool fails to recognize the device.(See below for potential fix)
###### Known WM2 2023 specific issues
1. The 780M iGPU is falsely reported as 760M with the drivers from the inital launch from AMD.(See below for fix)
2. AMD drivers cannot be installed correctly.(See below for fix)
3. Some HDMI ports are DOA.
4. Some units cannot run stably with RAM speed at 7500MT/s
5. Some units arrived with dead USB-C ports and some stops working over time including charging.
6. Some units blackscreens/shutdown when plugged in to charge.
###### Known WM2 2023 specific issues (Linux)
1. Suspend may not work well, you may disable sleep wakeups [from some problematic I2C devices](https://gitlab.freedesktop.org/drm/amd/-/issues/3073#note_2237586):
   ```
    echo disabled > /sys/bus/i2c/devices/i2c-GXTP7385:00/power/wakeup
    echo disabled > /sys/bus/i2c/devices/i2c-PNP0C50:00/power/wakeup
   ```
   
   This can be done on boot by placing the following in `/etc/udev/rules.d/20-wm2-i2c-nowake.rules`:
   ```
   SUBSYSTEM=="i2c", KERNEL=="i2c-PNP0C50:00", ATTR{power/wakeup}="disabled"
   SUBSYSTEM=="i2c", KERNEL=="i2c-GXTP7385:00", ATTR{power/wakeup}="disabled"
   ```
   
2. Disable acpi wakeups 
   ```
   for i in $(cat /proc/acpi/wakeup|grep enabled|awk '{print $1}'|xargs); do case $i in SLPB|XHCI);; *) echo $i|tee /proc/acpi/wakeup ; esac; done
   ```
3. Inside the Advanced BIOS set `Wake on PME` to `Disabled`.
4. If you use hibernate, set `HibernateMode=platform shutdown` in `/etc/systemd/sleep.conf` to avoid hangups during hibernate.
5. (Optional) to work-around possible LPDRR issues, disable LPDRR controller PowerSaving:
   Inside `UMC Common Options → LPDDR Options → LPDDR Controller Configuration → LPDDR Power Options`, set `Power Down Enable` to `Disabled` and `Phy Low Power Disable` to `1`.

# Workarounds
###### SD card slots disconneting constantly workaround, credits to ciphray#8122 on discord for the workaround, credits to Xryptic#5251 on discord for the instructions.<br/>
For anyone having SD/MicroSD disconnect/reconnect issues, the wonderful Ciphray has found a temporary solution that will work until GPD comes up with a fix. It lowers your SD readers speeds to USB 2.0 speeds, but they will stop having problems.<br/>


https://user-images.githubusercontent.com/74781086/206918588-2c9fbe71-5bef-4f38-aa8d-735079147608.mp4


1. Shut your WM2 down
2. Boot and press delete until you enter the bios screen
3. Hold ALT and press F5 to see advanced BIOS
4. Save and restart and enter the BIOS again.
5. Go to Chipset > South Bridge > SB USB Configuration > USB1 Ports
6. Change XHC1 Port 1 to “Disabled”
7. Save and exit BIOS

###### Workaround for inconsistent spacebar, credits to zero3growlithe#2048 on discord.
1. Detach the spacebar keycap (find tutorial on YT for laptop keyboards in general, the principle is the same) - be very careful!
2. Under the keycap, right in the center, stick a small piece of 1mm thick tape
3. Attach the keycap back to the keyboard
4. Enjoy!
###### Potential fix for touchpad issues.
1. https://discord.com/channels/243411108940087297/802730777443958824/1034599276698935378
###### Fix for missing Bitrates and Sample Rates for built-in DAC, credits to Goose#6003 on discord.
1. Go to Device Manager and click the dropdown for Sound, Video and Game Controllers
2. Right click Senary drivers -> uninstall -> check the box that says something about deleting the driver software, Continue. 
3. Reboot once the drivers are uninstalled.
4. Upon your next boot, you'll have the Windows HD audio drivers installed instead of the Senary drivers.
###### Potential fix for touchscreen or other hardware(eg. fingerprint sensor) related issues.
1. Shutdown the WM2 completely.
2. Use something thin(eg. a needle or a sim eject tool) and press the reset button on the left side of the WM2 inside the pin hole and hold it down for 5-10 seconds.(Note that this will reset any changes to the BIOS.)
3. Restart the device.
###### Fix for trackpad not working and firmware update failing.
1. Uninstall/Reinstall Motion Assistant.
# Changing amount VRAM allocated to iGPU
1. Enter BIOS by holding the DEL key during boot
2. Go to "Advanced" tab
3. Go to "GFX Configuration"
4. Change "UMA Frame buffer Size" to desired value, the recommended value is 4GB for 16GB RAM model and 8GB for 32GB RAM model.
5. Press ESC and go to "Save & Exit" tab
6. Select "Save Changes and Exit" and select "Yes"
###### Fix for falsely reported iGPU
1. Update BIOS and drivers.
###### Fix for drivers not installing correctly
1. Update BIOS and drivers.
###### Fix for distorted 3.5mm jack headphones sound (DTS always working without ability to disable)
1. Download DTS archive from GPD's support section for WM2.
2. Run the uninstall script as admin (possibly reboot for good measure).
3. Run the install script as admin (again could reboot). Now the apps should be installed (if you can't find them from start menu - try opening them through Microsoft store or the audio page in Windows).
4. Now the sound should be working correctly and you should be able to disable the effects. As a precaution try not updating the DTS apps, the weird behavior might be caused by an update.
###### Fix for DTS package not installing correctly
1. Most likely you unpacked it to non-system (not C:) drive. It will complain about missing files. Unpack the archive to system drive and re-run the install.
###### Fix for DTS package complaining about too long paths when unzipping
0. As a possible fix lift the Windows 260 characters path limit, it may affect the issue (tweakers like [SophiApp](https://github.com/Sophia-Community/SophiApp) can do that).
1. Unpack to the shortest possible path (f.ex. `C:/dts` should work).
###### Fix for WinGet being broken on Windows 11 (empty output, console turns blue)
1. It's a generic issue with WinGet on Win11. See this issue for solutions: https://github.com/microsoft/winget-cli/issues/3832
###### Disable the back buttons
The back buttons will cause keypress, when they are accidently pressed. The device is called `Mouse for Windows`, and can be disabled with the following command.

    echo 0 > /sys/bus/usb/devices/usb1/1-4/authorized

The device will be enabled after resuming from hibernation in which case a systemd service helps.

    echo '[Unit]
    Description=Local system resume actions
    After=suspend.target

    [Service]
    Type=simple
    ExecStart=echo 0 > /sys/bus/usb/devices/usb1/1-4/authorized

    [Install]
    WantedBy=suspend.target' > /etc/systemd/system/root-resume.service

    systemctl enable root-resume

To confirm the device id one can use `lsusb`.

    Bus 001 Device 014: ID 2f24:0135   Mouse for Windows

# Unlock higher than 28W TDP
###### Values shown are for 6800u Win Max 2, values will be different for Win Max 2 2023
https://user-images.githubusercontent.com/74781086/206918098-b3bf757f-b76e-4b6c-bb35-13d043470f6d.mp4
1. <b>DO IT AT YOUR OWN RISK </b>
2. Go to bios by pressing del key during start up process
3. While in bios menu, press ALT+F5 to access the hidden menu
4. Save and restart and enter the BIOS again.
5. Navigate to the following path Second Advance-> AMD CBS-> SMU Common Options
6. Change the values as follow or to the TDP you want, value is in mW
![SMU](https://user-images.githubusercontent.com/74781086/206560019-c329382d-0c79-4d82-806b-961e97c2f3cc.jpg)
7. Go to the SmartShift Control menu, and set it as follow
![SmartShift menu](https://user-images.githubusercontent.com/74781086/206560120-0cb52aa8-247b-44ef-9e0c-0fa8f3c5f40d.png)
8. Press ESC to get to the main menu, go to Save & Exit, and select Save Changes and Exit, and then select Yes, machine will reboot, and overclock profile will be set.

# Extra stuff lol
![image](https://user-images.githubusercontent.com/74781086/209065740-00fad02d-b789-478c-8f86-8b1bee5e1a3a.png)
